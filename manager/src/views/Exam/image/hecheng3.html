<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    <div id="Qrcode">
            <canvas id="myCanvas" style="width: 800px;height: 500px;border: 1px solid #ccc"></canvas>
            <input type="file" >
            <img class="img" src="./QQ图片20180112205113.jpg" alt="">
            <img class="imgs" src="" alt="">

    </div>
    <script>
        initImg()
    function initImg () {
    let codeUrl = document.getElementById('Qrcode').getElementsByTagName("img")[0].src,
        bgImgUrl = './QQ图片20180112205113.jpg',
        bgImgData;
    this.loadImg(bgImgUrl).then((res)=>{
        bgImgData = res;
        return this.loadImg(codeUrl);
    }).then((res) => {
        this.bgImg = this.createCanvas(bgImgData.img, res.img, bgImgData.width, bgImgData.height);
        this.isShow = false;
    })
}

function loadImg (url) {
    let image = new Image();
    return new Promise( (resolve) => {
        image.onload =  function() {
            resolve({
                img: this,
                width: image.width,
                height: image.height
            });
        }
        image.src = url; // 指定Image的路径
    });
}

function createCanvas (bgImg, codeImg, width, height) {
    let canvas = document.createElement('canvas'),
        ctx = canvas.getContext('2d');
    canvas.width = width;
    canvas.height = height;
    canvas.style.width  = width;
    canvas.style.height = height;
    ctx.drawImage(bgImg, 0, 0, width, height);
    ctx.drawImage(codeImg, width*0.32, height*0.456, width*0.36, width*0.36);
    return canvas.toDataURL('image/jpeg',1);
}

</script>

</body>
</html>